var M=Object.defineProperty;var y=(a,n,e)=>n in a?M(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e;var h=(a,n,e)=>(y(a,typeof n!="symbol"?n+"":n,e),e);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();const c=new EventTarget,k=new CustomEvent("update"),S=new EventTarget,T=new CustomEvent("update");class E{constructor(n,e,r,i,s){h(this,"start");h(this,"end");h(this,"inputStart");h(this,"inputEnd");h(this,"color");h(this,"inputColor");h(this,"container");h(this,"parent");h(this,"event");h(this,"eventTarget");h(this,"label");h(this,"inputLabel");if(n>=e)throw"Start has to be smaller than the end";this.start=n,this.end=e,this.event=k,this.eventTarget=c,this.parent=r,this.container=document.createElement("div"),this.inputStart=document.createElement("input"),this.inputEnd=document.createElement("input"),s&&(this.color=s,this.inputColor=document.createElement("input"),this.inputColor.value=s),i&&(this.label=i,this.inputLabel=document.createElement("input"),this.inputLabel.value=i),this.initializeHTML()}initializeHTML(){this.container.style.display="flex",this.container.style.flexFlow="row nowrap",this.inputStart.setAttribute("type","number"),this.inputEnd.setAttribute("type","number"),this.inputStart.setAttribute("value",this.start.toString()),this.inputEnd.setAttribute("value",this.end.toString()),this.inputStart.setAttribute("placeholder","Start"),this.inputEnd.setAttribute("placeholder","End"),this.inputStart.addEventListener("keyup",()=>{this.update(this.inputStart.valueAsNumber,null),this.eventTarget.dispatchEvent(this.event)}),this.inputStart.addEventListener("change",()=>{this.update(this.inputStart.valueAsNumber,null),this.eventTarget.dispatchEvent(this.event)}),this.inputEnd.addEventListener("keyup",()=>{this.update(null,this.inputEnd.valueAsNumber),this.eventTarget.dispatchEvent(this.event)}),this.inputEnd.addEventListener("change",()=>{this.update(null,this.inputEnd.valueAsNumber),this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputStart),this.container.appendChild(this.inputEnd),this.inputColor&&(this.inputColor.setAttribute("type","color"),this.inputColor.addEventListener("change",()=>{var n;this.color=(n=this.inputColor)==null?void 0:n.value,this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputColor)),this.inputLabel&&(this.inputLabel.setAttribute("type","text"),this.inputLabel.setAttribute("placeholder","label"),this.inputLabel.addEventListener("change",()=>{var n;this.label=(n=this.inputLabel)==null?void 0:n.value,console.log(this.label),this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputLabel)),this.parent.appendChild(this.container)}update(n,e){if((n!=null?n:this.start)>=(e!=null?e:this.end))throw"Start has to be larger than the end";this.start=n!=null?n:this.start,this.end=e!=null?e:this.end}delta(){return this.end-this.start}draw(n,e=5,r=10,i){const s=new Path2D;return s.rect(this.start,-e/2,this.delta(),e),s.rect(this.start-e*i.delta()/(2*n.width),-r/2,e*i.delta()/n.width,r),s.rect(this.end-e*i.delta()/(2*n.width),-r/2,e*i.delta()/n.width,r),s}}class g extends E{constructor(e,r,i){super(e,r,i);h(this,"tickMarkers");h(this,"tickMarkerInput");this.event=T,this.eventTarget=S,this.tickMarkers=[],this.tickMarkerInput=document.createElement("input"),this.tickMarkerInput.setAttribute("type","text"),this.tickMarkerInput.value=this.generateTickMarkers("amount",11).toString(),this.tickMarkers=this.generateTickMarkers("amount",11),this.tickMarkerInput.addEventListener("keyup",()=>{this.tickMarkers=this.tickMarkerInput.value.split(",").map(s=>Number(s)),c.dispatchEvent(k)}),this.tickMarkerInput.addEventListener("change",()=>{this.tickMarkers=this.tickMarkerInput.value.split(",").map(s=>Number(s)),c.dispatchEvent(k)}),this.container.appendChild(this.tickMarkerInput)}draw(e,r=5,i=10){const s=new Path2D;s.rect(this.start,-r/2,this.delta(),r);for(let o of this.tickMarkers)s.rect(o-r*this.delta()/(2*e.width),-i/2,r*this.delta()/e.width,i);return s}generateTickMarkers(e,r,i,s){if(e=="amount"&&r)return Array(r).fill(0).map((o,p)=>Math.round((p*this.delta()/(r-1)+this.start+Number.EPSILON)*100)/100);if(e=="interval"&&i){const o=[];let p=this.start+(s||0);for(;p<=this.end;)o.push(p),p+=i;return o}else throw"generateTickMarkers needs to meet mode requirements"}update(e,r){if((e!=null?e:this.start)>=(r!=null?r:this.end))throw"Start has to be larger than the end";this.start=e!=null?e:this.start,this.end=r!=null?r:this.end,this.tickMarkerInput.value=this.generateTickMarkers("amount",11).toString(),this.tickMarkers=this.generateTickMarkers("amount",11)}storeValues(){window.localStorage.setItem("scale",JSON.stringify({start:this.start,end:this.end,tickMarkers:this.tickMarkers}))}static fromValues(e){let r=window.localStorage.getItem("scale");if(!r)return;let i=JSON.parse(r);if(console.log(i),!i||!i.start||!i.end)return;const s=new g(i.start,i.end,e);return s.tickMarkers=i.tickMarkers,s}}const l=document.querySelector("canvas"),t=l.getContext("2d");if(t===null)throw"Invalid Canvas";t==null||t.save();const d=document.querySelector("#min-max-config");d==null||d.addEventListener("click",a=>{var e;const n=document.querySelector("#config-box");n==null||n.childNodes.forEach(r=>{r.nodeName=="DIV"&&r.id!="min-max-config"&&(d.firstElementChild.textContent=="-"?r.classList.add("hide"):r.classList.remove("hide"))}),((e=d.firstElementChild)==null?void 0:e.innerHTML)=="-"?d.firstElementChild.innerHTML="+":d.firstElementChild.innerHTML="-"});const m=document.querySelector("#add-range"),L=document.querySelector("#range-input-container"),f=I(),v=document.querySelector("#scale");let u=g.fromValues(v)||new g(-1,1,v);function w(){l.width=l==null?void 0:l.clientWidth,l.height=l==null?void 0:l.clientHeight,t==null||t.restore(),t==null||t.translate(0,l.height/2),t==null||t.scale(l.width/u.delta(),-1),t==null||t.translate(-u.start,0),b()}function b(){var n;t==null||t.save(),t==null||t.clearRect(u.start,-l.height/2,u.delta(),l.height);let a=0;t.fillStyle="rgb(0,10,20)",t.fill(u.draw(l,5,15));for(let e of u.tickMarkers)t==null||t.save(),t.font="15px consolas",e<u.start+u.delta()/2?t.textAlign="left":e-u.start+u.delta()/2<Number.EPSILON?t.textAlign="center":t.textAlign="right",t.fillStyle="black",t==null||t.translate(e,-20),t==null||t.scale(u.delta()/(l==null?void 0:l.width),-1),t==null||t.fillText(e.toString(),0,0),t==null||t.restore();for(let e of f){a+=50,t==null||t.translate(0,50),t.fillStyle=e.color||"black",t==null||t.fill(e.draw(l,5,15,u)),t==null||t.beginPath(),t.strokeStyle=e.color||"black",t.lineWidth=5*u.delta()/l.width,t.setLineDash([.2,.3]),t==null||t.moveTo(e.start+e.delta()/2,0),t==null||t.lineTo(e.start+e.delta()/2,-a),t==null||t.closePath(),t==null||t.stroke(),t==null||t.save(),t==null||t.translate(e.start+e.delta()/2,15),t==null||t.scale(u.delta()/(l==null?void 0:l.width),-1),t.textAlign="start";const r=(n=e.label)==null?void 0:n.split(/(_\{.*\})/g);let i=0;r==null||r.forEach(o=>{i+=o.includes("_")?o.replaceAll(/_|{|}/g,"").length*4:o.length*12});let s=-i/2;r==null||r.forEach(o=>{o.includes("_")?(o=o.replaceAll(/_|{|}/g,""),t.font="15px consolas",t==null||t.fillText(o||"",s,5),s+=o.length*5):(t.font="25px consolas",t==null||t.fillText(o||"",s,0),s+=o.length*12.5)}),t==null||t.restore()}t==null||t.restore()}function C(){f.push(new E(-Math.random(),Math.random(),L," ","#000")),console.log(f),b()}function A(){window.localStorage.setItem("ranges",JSON.stringify(f.map(a=>({start:a.start,end:a.end,color:a.color,label:a.label}))))}function I(){return window.localStorage.getItem("ranges")?JSON.parse(window.localStorage.getItem("ranges")).map(a=>a.start!==null||a.end!==null?new E(a.start,a.end,L,a.label,a.color):null).filter(a=>a!==null):(console.log("HI?!"),[])}m==null||m.addEventListener("click",C);w();window.addEventListener("resize",w);c.addEventListener("update",b);S.addEventListener("update",w);setInterval(()=>{A(),u.storeValues()},5e3);
