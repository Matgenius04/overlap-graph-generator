var M=Object.defineProperty;var T=(a,i,e)=>i in a?M(a,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[i]=e;var h=(a,i,e)=>(T(a,typeof i!="symbol"?i+"":i,e),e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();const f=new EventTarget,w=new CustomEvent("update"),y=new EventTarget,C=new CustomEvent("update");class v{constructor(i,e,s,n,r){h(this,"start");h(this,"end");h(this,"inputStart");h(this,"inputEnd");h(this,"color");h(this,"inputColor");h(this,"container");h(this,"parent");h(this,"event");h(this,"eventTarget");h(this,"label");h(this,"inputLabel");if(i==null||e==null||i>=e)throw"Start has to be smaller than the end";this.start=i,this.end=e,this.event=w,this.eventTarget=f,this.parent=s,this.container=document.createElement("div"),this.inputStart=document.createElement("input"),this.inputEnd=document.createElement("input"),r&&(this.color=r,this.inputColor=document.createElement("input"),this.inputColor.value=r),n&&(this.label=n,this.inputLabel=document.createElement("input"),this.inputLabel.value=n),this.initializeHTML()}initializeHTML(){this.container.style.display="flex",this.container.style.flexFlow="row nowrap",this.inputStart.setAttribute("type","number"),this.inputEnd.setAttribute("type","number"),this.inputStart.setAttribute("value",this.start.toString()),this.inputEnd.setAttribute("value",this.end.toString()),this.inputStart.setAttribute("placeholder","Start"),this.inputEnd.setAttribute("placeholder","End"),this.inputStart.addEventListener("keyup",()=>{this.update(this.inputStart.valueAsNumber,null),this.eventTarget.dispatchEvent(this.event)}),this.inputStart.addEventListener("change",()=>{this.update(this.inputStart.valueAsNumber,null),this.eventTarget.dispatchEvent(this.event)}),this.inputEnd.addEventListener("keyup",()=>{this.update(null,this.inputEnd.valueAsNumber),this.eventTarget.dispatchEvent(this.event)}),this.inputEnd.addEventListener("change",()=>{this.update(null,this.inputEnd.valueAsNumber),this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputStart),this.container.appendChild(this.inputEnd),this.inputColor&&(this.inputColor.setAttribute("type","color"),this.inputColor.addEventListener("change",()=>{var i;this.color=(i=this.inputColor)==null?void 0:i.value,this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputColor)),this.inputLabel&&(this.inputLabel.setAttribute("type","text"),this.inputLabel.setAttribute("placeholder","label"),this.inputLabel.addEventListener("change",()=>{var i;this.label=(i=this.inputLabel)==null?void 0:i.value,console.log(this.label),this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputLabel)),this.parent.appendChild(this.container)}update(i,e){if((i!=null?i:this.start)>=(e!=null?e:this.end))throw"Start has to be larger than the end";this.start=i!=null?i:this.start,this.end=e!=null?e:this.end}delta(){return this.end-this.start}draw(i,e=5,s=10,n){const r=new Path2D;return r.rect(this.start,-e/2,this.delta(),e),r.rect(this.start-e*n.delta()/(2*i.width),-s/2,e*n.delta()/i.width,s),r.rect(this.end-e*n.delta()/(2*i.width),-s/2,e*n.delta()/i.width,s),r}}class g extends v{constructor(e,s,n){super(e,s,n);h(this,"tickMarkers");h(this,"tickMarkerInput");this.event=C,this.eventTarget=y,this.tickMarkers=[],this.tickMarkerInput=document.createElement("input"),this.tickMarkerInput.setAttribute("type","text"),this.tickMarkerInput.value=this.generateTickMarkers("amount",11).toString(),this.tickMarkers=this.generateTickMarkers("amount",11),this.tickMarkerInput.addEventListener("keyup",()=>{this.tickMarkers=this.tickMarkerInput.value.split(",").map(r=>Number(r)),f.dispatchEvent(w)}),this.tickMarkerInput.addEventListener("change",()=>{this.tickMarkers=this.tickMarkerInput.value.split(",").map(r=>Number(r)),f.dispatchEvent(w)}),this.container.appendChild(this.tickMarkerInput)}draw(e,s=5,n=10){const r=new Path2D;r.rect(this.start,-s/2,this.delta(),s);for(let o of this.tickMarkers)r.rect(o-s*this.delta()/(2*e.width),-n/2,s*this.delta()/e.width,n);return r}generateTickMarkers(e,s,n,r){if(e=="amount"&&s)return Array(s).fill(0).map((o,p)=>Math.round((p*this.delta()/(s-1)+this.start+Number.EPSILON)*100)/100);if(e=="interval"&&n){const o=[];let p=this.start+(r||0);for(;p<=this.end;)o.push(p),p+=n;return o}else throw"generateTickMarkers needs to meet mode requirements"}update(e,s){if((e!=null?e:this.start)>=(s!=null?s:this.end))throw"Start has to be larger than the end";this.start=e!=null?e:this.start,this.end=s!=null?s:this.end,this.tickMarkerInput.value=this.generateTickMarkers("amount",11).toString(),this.tickMarkers=this.generateTickMarkers("amount",11)}storeValues(){window.localStorage.setItem("scale",JSON.stringify({start:this.start,end:this.end,tickMarkers:this.tickMarkers}))}static fromValues(e){let s=window.localStorage.getItem("scale");if(!s)return;let n=JSON.parse(s);if(console.log(n),!n||!n.start||!n.end)return;const r=new g(n.start,n.end,e);return r.tickMarkers=n.tickMarkers,r}}class I{constructor(i){h(this,"div");h(this,"pos");if(i==null)throw"Null Div";this.div=i;const e=window.localStorage.getItem("configBoxLocation");if(e){let s=JSON.parse(e);e&&(this.div.style.top=s.top.toString()+"px",this.div.style.left=s.left.toString()+"px")}this.pos={x:0,y:0,a:0,b:0},this.div.addEventListener("mousedown",this.dragMouseDown.bind(this))}dragMouseDown(i){this.pos.a=i.clientX,this.pos.b=i.clientY,document.onmouseup=this.closeDragElement.bind(this),document.onmousemove=this.elementDrag.bind(this)}closeDragElement(i){document.onmouseup=null,document.onmousemove=null}elementDrag(i){i.preventDefault(),this.pos.x=this.pos.a-i.clientX,this.pos.y=this.pos.b-i.clientY,this.pos.a=i.clientX,this.pos.b=i.clientY,this.div.style.top=this.div.offsetTop-this.pos.y+"px",this.div.style.left=this.div.offsetLeft-this.pos.x+"px"}store(){window.localStorage.setItem("configBoxLocation",JSON.stringify({top:this.div.style.top,left:this.div.style.left}))}}const l=document.querySelector("canvas"),t=l.getContext("2d");if(t===null)throw"Invalid Canvas";t==null||t.save();const c=document.querySelector("#config-box");new I(c);const d=document.querySelector("#min-max-config");d==null||d.addEventListener("click",a=>{var i;c==null||c.childNodes.forEach(e=>{e.nodeName=="DIV"&&e.id!="min-max-config"&&(d.firstElementChild.textContent=="-"?e.classList.add("hide"):e.classList.remove("hide"))}),((i=d.firstElementChild)==null?void 0:i.innerHTML)=="-"?d.firstElementChild.innerHTML="+":d.firstElementChild.innerHTML="-"});const k=document.querySelector("#add-range"),L=document.querySelector("#range-input-container"),m=D(),S=document.querySelector("#scale");let u=g.fromValues(S)||new g(-1,1,S);function E(){l.width=l==null?void 0:l.clientWidth,l.height=l==null?void 0:l.clientHeight,t==null||t.restore(),t==null||t.translate(0,l.height/2),t==null||t.scale(l.width/u.delta(),-1),t==null||t.translate(-u.start,0),b()}function b(){var i;t==null||t.save(),t==null||t.clearRect(u.start,-l.height/2,u.delta(),l.height);let a=0;t.fillStyle="rgb(0,10,20)",t.fill(u.draw(l,5,15));for(let e of u.tickMarkers)t==null||t.save(),t.font="15px consolas",e<u.start+u.delta()/2?t.textAlign="left":e-u.start+u.delta()/2<Number.EPSILON?t.textAlign="center":t.textAlign="right",t.fillStyle="black",t==null||t.translate(e,-20),t==null||t.scale(u.delta()/(l==null?void 0:l.width),-1),t==null||t.fillText(e.toString(),0,0),t==null||t.restore();for(let e of m){a+=50,t==null||t.translate(0,50),t.fillStyle=e.color||"black",t==null||t.fill(e.draw(l,5,15,u)),t==null||t.beginPath(),t.strokeStyle=e.color||"black",t.lineWidth=5*u.delta()/l.width,t.setLineDash([.2,.3]),t==null||t.moveTo(e.start+e.delta()/2,0),t==null||t.lineTo(e.start+e.delta()/2,-a),t==null||t.closePath(),t==null||t.stroke(),t==null||t.save(),t==null||t.translate(e.start+e.delta()/2,15),t==null||t.scale(u.delta()/(l==null?void 0:l.width),-1),t.textAlign="start";const s=(i=e.label)==null?void 0:i.split(/(_\{.*\})/g);let n=0;s==null||s.forEach(o=>{n+=o.includes("_")?o.replaceAll(/_|{|}/g,"").length*4:o.length*12});let r=-n/2;s==null||s.forEach(o=>{o.includes("_")?(o=o.replaceAll(/_|{|}/g,""),t.font="15px consolas",t==null||t.fillText(o||"",r,5),r+=o.length*5):(t.font="25px consolas",t==null||t.fillText(o||"",r,0),r+=o.length*12.5)}),t==null||t.restore()}t==null||t.restore()}function N(){m.push(new v(-Math.random(),Math.random(),L," ","#000")),console.log(m),b()}function A(){window.localStorage.setItem("ranges",JSON.stringify(m.map(a=>({start:a.start,end:a.end,color:a.color,label:a.label}))))}function D(){return window.localStorage.getItem("ranges")?JSON.parse(window.localStorage.getItem("ranges")).map(a=>{try{if(a.start==null||a.end==null)throw"Null Values";return new v(a.start,a.end,L,a.label,a.color)}catch{return null}}).filter(a=>a!=null):(console.log("HI?!"),[])}k==null||k.addEventListener("click",N);E();window.addEventListener("resize",E);f.addEventListener("update",b);y.addEventListener("update",E);setInterval(()=>{A(),u.storeValues()},2e3);
