var _=Object.defineProperty;var z=(a,i,e)=>i in a?_(a,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[i]=e;var h=(a,i,e)=>(z(a,typeof i!="symbol"?i+"":i,e),e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();const w=new EventTarget,N=new CustomEvent("update"),A=new EventTarget,F=new CustomEvent("update");class I{constructor(i,e,s,n,r){h(this,"start");h(this,"end");h(this,"inputStart");h(this,"inputEnd");h(this,"color");h(this,"inputColor");h(this,"container");h(this,"parent");h(this,"event");h(this,"eventTarget");h(this,"label");h(this,"inputLabel");if(i==null||e==null||i>=e)throw"Start has to be smaller than the end";this.start=i,this.end=e,this.event=N,this.eventTarget=w,this.parent=s,this.container=document.createElement("div"),this.inputStart=document.createElement("input"),this.inputEnd=document.createElement("input"),r&&(this.color=r,this.inputColor=document.createElement("input"),this.inputColor.value=r),n&&(this.label=n,this.inputLabel=document.createElement("input"),this.inputLabel.value=n),this.initializeHTML(),this.inputStart.step=String(.1**f(this.end)),this.inputEnd.step=String(.1**f(this.end))}initializeHTML(){this.container.style.display="flex",this.container.style.flexFlow="row nowrap",this.inputStart.setAttribute("type","number"),this.inputEnd.setAttribute("type","number"),this.inputStart.setAttribute("value",this.start.toString()),this.inputEnd.setAttribute("value",this.end.toString()),this.inputStart.setAttribute("placeholder","Start"),this.inputEnd.setAttribute("placeholder","End"),this.inputStart.addEventListener("keyup",()=>{this.update(this.inputStart.valueAsNumber,null),this.eventTarget.dispatchEvent(this.event)}),this.inputStart.addEventListener("change",()=>{this.update(this.inputStart.valueAsNumber,null),this.eventTarget.dispatchEvent(this.event)}),this.inputEnd.addEventListener("keyup",()=>{this.update(null,this.inputEnd.valueAsNumber),this.eventTarget.dispatchEvent(this.event)}),this.inputEnd.addEventListener("change",()=>{this.update(null,this.inputEnd.valueAsNumber),this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputStart),this.container.appendChild(this.inputEnd),this.inputColor&&(this.inputColor.setAttribute("type","color"),this.inputColor.addEventListener("change",()=>{var i;this.color=(i=this.inputColor)==null?void 0:i.value,this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputColor)),this.inputLabel&&(this.inputLabel.setAttribute("type","text"),this.inputLabel.setAttribute("placeholder","label"),this.inputLabel.addEventListener("change",()=>{var i;this.label=(i=this.inputLabel)==null?void 0:i.value,console.log(this.label),this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputLabel)),this.parent.appendChild(this.container)}update(i,e){if((i!=null?i:this.start)>=(e!=null?e:this.end))throw"Start has to be larger than the end";this.start=i!=null?i:this.start,this.end=e!=null?e:this.end,this.inputStart.step=String(.1**f(this.end)),this.inputEnd.step=String(.1**f(this.end))}delta(){return this.end-this.start}draw(i,e=5,s=10,n){const r=new Path2D;return r.rect(this.start,-e/2,this.delta(),e),r.rect(this.start-e*n.delta()/(2*i.width),-s/2,e*n.delta()/i.width,s),r.rect(this.end-e*n.delta()/(2*i.width),-s/2,e*n.delta()/i.width,s),r}}class S extends I{constructor(e,s,n){super(e,s,n);h(this,"tickMarkers");h(this,"tickMarkerInput");this.event=F,this.eventTarget=A,this.tickMarkers=[],this.tickMarkerInput=document.createElement("input"),this.tickMarkerInput.setAttribute("type","text"),console.log("problem area"),this.tickMarkerInput.value=this.generateTickMarkers("amount",11).toString(),this.tickMarkers=this.generateTickMarkers("amount",11),this.tickMarkerInput.addEventListener("keyup",()=>{this.tickMarkers=this.tickMarkerInput.value.split(",").map(r=>Number(r)),w.dispatchEvent(N)}),this.tickMarkerInput.addEventListener("change",()=>{this.tickMarkers=this.tickMarkerInput.value.split(",").map(r=>Number(r)),w.dispatchEvent(N)}),this.container.appendChild(this.tickMarkerInput)}draw(e,s=5,n=10){const r=new Path2D;r.rect(this.start,-s/2,this.delta(),s);for(let l of this.tickMarkers)r.rect(l-s*this.delta()/(2*e.width),-n/2,s*this.delta()/e.width,n);return r}generateTickMarkers(e,s,n,r){if(e=="amount"&&(isFinite(s)?s>1:!1))return Array(s).fill(0).map((l,b)=>Math.round((b*this.delta()/(s-1)+this.start+Number.EPSILON)*1e5)/1e5);if(e=="interval"&&(isFinite(n)?n:!1)){let l=0;const b=[];let M=this.start+(r||0);for(;M<=this.end&&l<1e4;)b.push(Math.round((M+Number.EPSILON)*1e4)/1e4),M+=n,l++;if(l==1e4)throw"Infinite Loop";return b}else throw"generateTickMarkers needs to meet mode requirements"}update(e,s){if((e!=null?e:this.start)>=(s!=null?s:this.end))throw"Start has to be larger than the end";this.start=e!=null?e:this.start,this.end=s!=null?s:this.end,this.tickMarkerInput.value=this.generateTickMarkers("amount",11).toString(),this.tickMarkers=this.generateTickMarkers("amount",11),console.log(f(this.start).toString()),this.inputStart.step=String(.1**f(this.end)),this.inputEnd.step=String(.1**f(this.end))}storeValues(){window.localStorage.setItem("scale",JSON.stringify({start:this.start,end:this.end,tickMarkers:this.tickMarkers}))}static fromValues(e){let s=window.localStorage.getItem("scale");if(!s)return;let n=JSON.parse(s);if(console.log(n),!n||!n.start||!n.end)return;const r=new S(n.start,n.end,e);return r.tickMarkers=n.tickMarkers,r}}function f(a){if(!isFinite(a))return 0;for(var i=1,e=0;Math.round(a*i)/i!==a;)i*=10,e++;return e}class D{constructor(i){h(this,"div");h(this,"pos");if(i==null)throw"Null Div";this.div=i;const e=window.localStorage.getItem("configBoxLocation");if(e){let s=JSON.parse(e);e&&(this.div.style.top=s.top.toString()+"px",this.div.style.left=s.left.toString()+"px")}this.pos={x:0,y:0,a:0,b:0},this.div.addEventListener("mousedown",this.dragMouseDown.bind(this))}dragMouseDown(i){this.pos.a=i.clientX,this.pos.b=i.clientY,document.onmouseup=this.closeDragElement.bind(this),document.onmousemove=this.elementDrag.bind(this)}closeDragElement(i){document.onmouseup=null,document.onmousemove=null}elementDrag(i){this.pos.x=this.pos.a-i.clientX,this.pos.y=this.pos.b-i.clientY,this.pos.a=i.clientX,this.pos.b=i.clientY,this.div.style.top=this.div.offsetTop-this.pos.y+"px",this.div.style.left=this.div.offsetLeft-this.pos.x+"px"}store(){window.localStorage.setItem("configBoxLocation",JSON.stringify({top:this.div.style.top,left:this.div.style.left}))}}const d=document.querySelector("#mode-selector"),m=document.querySelector("#tickmark-startdelta"),g=document.querySelector("#tickmark-interval"),c=document.querySelector("#tickmark-amount"),k=document.querySelector("#generate-amount"),v=document.querySelector("#generate-interval"),y=document.querySelector("#tickmark-generator-output");if(!m||!g||!c||!d||!y||!k||!v)throw"Input Element Not Found";y.onclick=()=>navigator.clipboard.writeText(y.innerHTML);class J{constructor(i){h(this,"scale");this.scale=i,d==null||d.addEventListener("change",(()=>{((d==null?void 0:d.value)||"amount")=="interval"?(k.hidden=!0,v.hidden=!1):(k.hidden=!1,v.hidden=!0),this.updateTickMarks.bind(this)}).bind(this)),m.addEventListener("change",this.updateTickMarks.bind(this)),g.addEventListener("change",this.updateTickMarks.bind(this)),c.addEventListener("change",this.updateTickMarks.bind(this)),m.value="0",g.value="0.1",g.min=Number.EPSILON.toString(),c.value="11",c.step="1",c.min="2",A.addEventListener("update",this.updateTickMarks.bind(this)),this.updateTickMarks(),((d==null?void 0:d.value)||"amount")=="interval"?(k.hidden=!0,v.hidden=!1):(k.hidden=!1,v.hidden=!0)}updateTickMarks(){console.log("updating..."),y.innerHTML=this.scale.generateTickMarkers((d==null?void 0:d.value)||"amount",c==null?void 0:c.valueAsNumber,g==null?void 0:g.valueAsNumber,m==null?void 0:m.valueAsNumber).toString()}}const o=document.querySelector("canvas"),t=o.getContext("2d");if(t===null)throw"Invalid Canvas";t==null||t.save();const E=document.querySelector("#config-box"),V=document.querySelector("#tickmark-generator-box");new D(E);new D(V);const p=document.querySelector("#min-max-config");p==null||p.addEventListener("click",a=>{var i;E==null||E.childNodes.forEach(e=>{e.nodeName=="DIV"&&e.id!="min-max-config"&&(p.firstElementChild.textContent=="-"?e.classList.add("hide"):e.classList.remove("hide"))}),((i=p.firstElementChild)==null?void 0:i.innerHTML)=="-"?p.firstElementChild.innerHTML="+":p.firstElementChild.innerHTML="-"});const T=document.querySelector("#add-range"),P=document.querySelector("#range-input-container"),L=X(),O=document.querySelector("#scale");let u=S.fromValues(O)||new S(-1,1,O);new J(u);function C(){o.width=o==null?void 0:o.clientWidth,o.height=o==null?void 0:o.clientHeight,t==null||t.restore(),t==null||t.translate(0,o.height/2),t==null||t.scale(o.width/u.delta(),-1),t==null||t.translate(-u.start,0),q()}function q(){var i;t==null||t.save(),t==null||t.clearRect(u.start,-o.height/2,u.delta(),o.height);let a=0;t.fillStyle="rgb(0,10,20)",t.fill(u.draw(o,5,15));for(let e of u.tickMarkers)t==null||t.save(),t.font="15px consolas",e<u.start+u.delta()/2?t.textAlign="left":e-u.start+u.delta()/2<Number.EPSILON?t.textAlign="center":t.textAlign="right",t.fillStyle="black",t==null||t.translate(e,-20),t==null||t.scale(u.delta()/(o==null?void 0:o.width),-1),t==null||t.fillText(e.toString(),0,0),t==null||t.restore();for(let e of L){a+=50,t==null||t.translate(0,50),t.fillStyle=e.color||"black",t==null||t.fill(e.draw(o,5,15,u)),t==null||t.beginPath(),t.strokeStyle=e.color||"black",t.lineWidth=5*u.delta()/o.width,t.setLineDash([.2,.3]),t==null||t.moveTo(e.start+e.delta()/2,0),t==null||t.lineTo(e.start+e.delta()/2,-a),t==null||t.closePath(),t==null||t.stroke(),t==null||t.save(),t==null||t.translate(e.start+e.delta()/2,15),t==null||t.scale(u.delta()/(o==null?void 0:o.width),-1),t.textAlign="start";const s=(i=e.label)==null?void 0:i.split(/(_\{.*\})/g);let n=0;s==null||s.forEach(l=>{n+=l.includes("_")?l.replaceAll(/_|{|}/g,"").length*4:l.length*12});let r=-n/2;s==null||s.forEach(l=>{l.includes("_")?(l=l.replaceAll(/_|{|}/g,""),t.font="15px consolas",t==null||t.fillText(l||"",r,5),r+=l.length*5):(t.font="25px consolas",t==null||t.fillText(l||"",r,0),r+=l.length*12.5)}),t==null||t.restore()}t==null||t.restore()}function H(){L.push(new I(-Math.random(),Math.random(),P," ","#000")),console.log(L),q()}function R(){window.localStorage.setItem("ranges",JSON.stringify(L.map(a=>({start:a.start,end:a.end,color:a.color,label:a.label}))))}function X(){return window.localStorage.getItem("ranges")?JSON.parse(window.localStorage.getItem("ranges")).map(a=>{try{if(a.start==null||a.end==null)throw"Null Values";return new I(a.start,a.end,P,a.label,a.color)}catch{return null}}).filter(a=>a!=null):(console.log("HI?!"),[])}T==null||T.addEventListener("click",H);C();window.addEventListener("resize",C);w.addEventListener("update",q);A.addEventListener("update",C);setInterval(()=>{R(),u.storeValues()},2e3);
