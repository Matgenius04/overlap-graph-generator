var M=Object.defineProperty;var y=(l,r,e)=>r in l?M(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e;var h=(l,r,e)=>(y(l,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();const c=new EventTarget,k=new CustomEvent("update"),S=new EventTarget,T=new CustomEvent("update");class E{constructor(r,e,i,n,s){h(this,"start");h(this,"end");h(this,"inputStart");h(this,"inputEnd");h(this,"color");h(this,"inputColor");h(this,"container");h(this,"parent");h(this,"event");h(this,"eventTarget");h(this,"label");h(this,"inputLabel");if(r>=e)throw"Start has to be larger than the end";this.start=r,this.end=e,this.event=k,this.eventTarget=c,this.parent=i,this.container=document.createElement("div"),this.inputStart=document.createElement("input"),this.inputEnd=document.createElement("input"),s&&(this.color=s,this.inputColor=document.createElement("input"),this.inputColor.value=s),n&&(this.label=n,this.inputLabel=document.createElement("input"),this.inputLabel.value=n),this.initializeHTML()}initializeHTML(){this.container.style.display="flex",this.container.style.flexFlow="row nowrap",this.inputStart.setAttribute("type","number"),this.inputEnd.setAttribute("type","number"),this.inputStart.setAttribute("value",this.start.toString()),this.inputEnd.setAttribute("value",this.end.toString()),this.inputStart.setAttribute("placeholder","Start"),this.inputEnd.setAttribute("placeholder","End"),this.inputStart.addEventListener("keyup",()=>{this.update(this.inputStart.valueAsNumber,null),this.eventTarget.dispatchEvent(this.event)}),this.inputStart.addEventListener("change",()=>{this.update(this.inputStart.valueAsNumber,null),this.eventTarget.dispatchEvent(this.event)}),this.inputEnd.addEventListener("keyup",()=>{this.update(null,this.inputEnd.valueAsNumber),this.eventTarget.dispatchEvent(this.event)}),this.inputEnd.addEventListener("change",()=>{this.update(null,this.inputEnd.valueAsNumber),this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputStart),this.container.appendChild(this.inputEnd),this.inputColor&&(this.inputColor.setAttribute("type","color"),this.inputColor.addEventListener("change",()=>{var r;this.color=(r=this.inputColor)==null?void 0:r.value,this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputColor)),this.inputLabel&&(this.inputLabel.setAttribute("type","text"),this.inputLabel.setAttribute("placeholder","label"),this.inputLabel.addEventListener("change",()=>{var r;this.label=(r=this.inputLabel)==null?void 0:r.value,console.log(this.label),this.eventTarget.dispatchEvent(this.event)}),this.container.appendChild(this.inputLabel)),this.parent.appendChild(this.container)}update(r,e){if((r!=null?r:this.start)>=(e!=null?e:this.end))throw"Start has to be larger than the end";this.start=r!=null?r:this.start,this.end=e!=null?e:this.end}delta(){return this.end-this.start}draw(r,e=5,i=10){const n=new Path2D;return n.rect(this.start,-e/2,this.delta(),e),n.rect(this.start-e/(2*r.width),-i/2,e/r.width,i),n.rect(this.end-e/(2*r.width),-i/2,e/r.width,i),n}}class g extends E{constructor(e,i,n){super(e,i,n);h(this,"tickMarkers");h(this,"tickMarkerInput");this.event=T,this.eventTarget=S,this.tickMarkers=[],this.tickMarkerInput=document.createElement("input"),this.tickMarkerInput.setAttribute("type","text"),this.tickMarkerInput.value=this.generateTickMarkers("amount",11).toString(),this.tickMarkers=this.generateTickMarkers("amount",11),this.tickMarkerInput.addEventListener("keyup",()=>{this.tickMarkers=this.tickMarkerInput.value.split(",").map(s=>Number(s)),c.dispatchEvent(k)}),this.tickMarkerInput.addEventListener("change",()=>{this.tickMarkers=this.tickMarkerInput.value.split(",").map(s=>Number(s)),c.dispatchEvent(k)}),this.container.appendChild(this.tickMarkerInput)}draw(e,i=5,n=10){const s=new Path2D;s.rect(this.start,-i/2,this.delta(),i);for(let o of this.tickMarkers)s.rect(o-i/(2*e.width),-n/2,i/e.width,n);return s}generateTickMarkers(e,i,n,s){if(e=="amount"&&i)return Array(i).fill(0).map((o,p)=>Math.round((p*this.delta()/(i-1)+this.start+Number.EPSILON)*100)/100);if(e=="interval"&&n){const o=[];let p=this.start+(s||0);for(;p<=this.end;)o.push(p),p+=n;return o}else throw"generateTickMarkers needs to meet mode requirements"}update(e,i){if((e!=null?e:this.start)>=(i!=null?i:this.end))throw"Start has to be larger than the end";this.start=e!=null?e:this.start,this.end=i!=null?i:this.end,this.tickMarkerInput.value=this.generateTickMarkers("amount",11).toString(),this.tickMarkers=this.generateTickMarkers("amount",11)}storeValues(){window.localStorage.setItem("scale",JSON.stringify({start:this.start,end:this.end,tickMarkers:this.tickMarkers}))}static fromValues(e){let i=window.localStorage.getItem("scale");if(!i)return;let n=JSON.parse(i);const s=new g(n.start,n.end,e);return s.tickMarkers=n.tickMarkers,s}}const a=document.querySelector("canvas"),t=a.getContext("2d");if(t===null)throw"Invalid Canvas";t==null||t.save();const d=document.querySelector("#min-max-config");d==null||d.addEventListener("click",l=>{var e;const r=document.querySelector("#config-box");r==null||r.childNodes.forEach(i=>{i.nodeName=="DIV"&&i.id!="min-max-config"&&(d.firstElementChild.textContent=="-"?i.classList.add("hide"):i.classList.remove("hide"))}),((e=d.firstElementChild)==null?void 0:e.innerHTML)=="-"?d.firstElementChild.innerHTML="+":d.firstElementChild.innerHTML="-"});const m=document.querySelector("#add-range"),L=document.querySelector("#range-input-container"),f=I(),b=document.querySelector("#scale");let u=g.fromValues(b)||new g(-1,1,b);function v(){a.width=a==null?void 0:a.clientWidth,a.height=a==null?void 0:a.clientHeight,t==null||t.restore(),t==null||t.translate(0,a.height/2),t==null||t.scale(a.width/u.delta(),-1),t==null||t.translate(-u.start,0),w()}function w(){var r;t==null||t.save(),t==null||t.clearRect(u.start,-a.height/2,u.delta(),a.height);let l=0;t.fillStyle="rgb(0,10,20)",t.fill(u.draw(a,5,15));for(let e of u.tickMarkers)t==null||t.save(),t.font="15px consolas",e<u.start+u.delta()/2?t.textAlign="left":e-u.start+u.delta()/2<Number.EPSILON?t.textAlign="center":t.textAlign="right",t.fillStyle="black",t==null||t.translate(e,-20),t==null||t.scale(u.delta()/(a==null?void 0:a.width),-1),t==null||t.fillText(e.toString(),0,0),t==null||t.restore();for(let e of f){l+=50,t==null||t.translate(0,50),t.fillStyle=e.color||"black",t==null||t.fill(e.draw(a,5,15)),t==null||t.beginPath(),t.strokeStyle=e.color||"black",t.lineWidth=5/(2*a.width),t==null||t.moveTo(e.start+e.delta()/2,0),t==null||t.lineTo(e.start+e.delta()/2,-l),t==null||t.closePath(),t==null||t.stroke(),t==null||t.save(),t==null||t.translate(e.start+e.delta()/2,15),t==null||t.scale(u.delta()/(a==null?void 0:a.width),-1),t.textAlign="start";const i=(r=e.label)==null?void 0:r.split(/(_\{.*\})/g);let n=0;i==null||i.forEach(o=>{n+=o.includes("_")?o.replaceAll(/_|{|}/g,"").length*4:o.length*12});let s=-n/2;i==null||i.forEach(o=>{o.includes("_")?(o=o.replaceAll(/_|{|}/g,""),t.font="15px consolas",t==null||t.fillText(o||"",s,5),s+=o.length*5):(t.font="25px consolas",t==null||t.fillText(o||"",s,0),s+=o.length*12.5)}),t==null||t.restore()}t==null||t.restore()}function C(){f.push(new E(-Math.random(),Math.random(),L," ","#000")),console.log(f),w()}function A(){window.localStorage.setItem("ranges",JSON.stringify(f.map(l=>({start:l.start,end:l.end,color:l.color,label:l.label}))))}function I(){return window.localStorage.getItem("ranges")?JSON.parse(window.localStorage.getItem("ranges")).map(l=>new E(l.start,l.end,L,l.label,l.color)):[]}m==null||m.addEventListener("click",C);v();document.addEventListener("resize",v);c.addEventListener("update",w);S.addEventListener("update",v);setInterval(()=>{A(),u.storeValues()},5e3);
